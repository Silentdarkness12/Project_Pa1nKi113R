Actor Timer : Inventory
{
inventory.maxamount 4
}

ACTOR MeleePuff: BulletPuff
{
  renderstyle Translucent
  alpha 0.5
  Scale 1.5
DamageType Melee
  +NOBLOCKMAP
  +NOGRAVITY
  +NOEXTREMEDEATH
  +PUFFONACTORS
  +BLOODLESSIMPACT 
  +FORCEXYBILLBOARD
  +DONTSPLASH
  states
  {
  Spawn:
    PUFF A 3 A_PlaySound("player/cyborg/fist")
    PUFF BCD 3
    stop
  Death:
    PUFF A 3 A_PlaySound("player/cyborg/fist")
    PUFF BCD 3
    stop
  Melee:
    PUFF A 3 A_PlaySound("player/cyborg/fist")
    PUFF BCD 3
    stop
  XDeath:
    PUFF A 3 A_PlaySound("player/cyborg/fist")
    PUFF BCD 3
    stop
  Crash:
    PUFF A 3 A_PlaySound("player/cyborg/fist")
    PUFF BCD 3
    stop
  }
}

ACTOR FatalityPuff: MeleePuff
{
DamageType Fatality
Decal "Crack"
  states
  {
  Spawn:
  XDeath:
  Melee:
  Death:
  Crash:
    TNT1 A 0 A_PlaySound("player/cyborg/fist")
    EXPL AAAAAA 0 A_CustomMissile ("QuickSmoke", 6, 0, random (0, 360), 2, random (0, 360))
    TNT1 A 0
    stop
  }
}

ACTOR KickPuff: MeleePuff
{
DamageType Kick
Decal "BootMark"
}

ACTOR SuperKickPuff: KickPuff
{
DamageType Kick
-NOEXTREMEDEATH
+EXTREMEDEATH
Decal "Crack"
  states
  {
  Death:
    PUFF A 3 A_PlaySound("player/cyborg/kick")
    PUFF BCD 3
    stop
  Crash:
    PUFF A 3 A_PlaySound("player/cyborg/kick")
    PUFF BCD 3
    stop
	}
}

ACTOR SmashingPuff: MeleePuff
{
DamageType ExplosiveImpact
-NOEXTREMEDEATH
Decal "Crack"
  states
  {
  Spawn:
  XDeath:
  Melee:
  Death:
  Crash:
    TNT1 A 0 A_PlaySound("player/cyborg/fist")
    EXPL A 0 Radius_Quake (4, 24, 0, 15, 0)
	EXPL AAAAAA 0 A_CustomMissile ("QuickSmoke", 6, 0, random (0, 360), 2, random (0, 360))
    EXPL AAA 0 A_CustomMissile ("QuickSmoke", 6, 0, random (0, 360), 2, random (0, 360))
    TNT1 A 0
    stop
  }
}

ACTOR SmashingPuff2: MeleePuff
{
DamageType ExplosiveImpact
-NOEXTREMEDEATH
Decal "Crack"
  states
  {
  Spawn:
  XDeath:
  Melee:
  Death:
  Crash:
    TNT1 A 0 A_PlaySound("player/cyborg/kick")
    EXPL A 0 Radius_Quake (4, 24, 0, 15, 0)
	EXPL AAAAAA 0 A_CustomMissile ("QuickSmoke", 6, 0, random (0, 360), 2, random (0, 360))
    EXPL AAA 0 A_CustomMissile ("QuickSmoke", 6, 0, random (0, 360), 2, random (0, 360))
    TNT1 A 0
    stop
  }
}

ACTOR UberPunchPuff: SmashingPuff2
{
DamageType SuperPunch
}

ACTOR FatalitySmashingPuff: SmashingPuff
{
DamageType Fatality
+NOEXTREMEDEATH
-EXTREMEDEATH
	states
	{
	Death:
	Crash:
		TNT1 A 0 A_PlaySound("player/cyborg/fist")
		}
}

ACTOR HitPuff: BulletPuff Replaces BulletPuff
{
  renderstyle Translucent
  alpha 0.4
  Scale 1.5
  +NOBLOCKMAP
  -NOGRAVITY
  Gravity 0.01
  +NOEXTREMEDEATH
  +FORCEXYBILLBOARD
DamageType Bullet
Decal "BulletChip"
+DONTSPLASH
-EXPLODEONWATER
  states
  {
  Spawn:
	TNT1 A 0
	TNT1 AAAAAAAAAA 0 A_CustomMissile ("SparkX", 2, 0, random (0, 360), 2, random (0, 360))
    TNT1 A 0 A_SpawnItemEx ("RicoChet",0,0,-5,0,0,0,0,SXF_NOCHECKPOSITION,0)
    TNT1 AAAA 0
    PUFF A 0 bright A_PlaySound("ricochet/hit")
  Melee:
	TNT1 AAA 0 A_CustomMissile ("OldschoolRocketSmokeTrail2", 2, 0, random (0, 360), 2, random (0, 360))
	stop
  }
}

actor shotpuff : HitPuff
{
DamageType SSG
}

actor QUADshotpuff1 : HitPuff
{
DamageType SSG
+RIPPER
+EXTREMEDEATH
}

actor QUADshotpuff2 : HitPuff
{
DamageType SSG
+RIPPER
}

actor QUADshotpuff3 : HitPuff
{
DamageType QuadBlast
+RIPPER
+EXTREMEDEATH
}

actor Shotgunpuff : HitPuff
{
DamageType Shotgun
}

ACTOR RicoChet
{
	renderstyle Add
	alpha 1.0
	-COUNTKILL
	-SHOOTABLE
	+CLIENTSIDEONLY
	+BLOODLESSIMPACT 
	+FORCEXYBILLBOARD
	+THRUACTORS
	+NOGRAVITY
	Obituary "%o ate bullet shrapnel."
	damagetype "Shrapnel"
	Scale 0.09
	Speed 0
	Radius 1
	Height 1
	states
	{
	NoFlare:
		TNT1 A 0
		Stop
	Spawn:
		TNT1 A 0
//		TNT1 A 0 A_Explode(4, 15)
		TNT1 A 0 A_CheckFloor("SpawnFloor")
		TNT1 A 0 A_SpawnItem ("YellowFlareSmall", 0)
		TNT1 A 0 A_SpawnItemEx ("DetectFloorBullet",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilBullet",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("UnderwaterHitPuff",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 AAAAAAAAAA 0 A_CustomMissile ("SparkX", 2, 0, random (0, 360), 2, random (0, 360))
		PUFF A 0 A_PlaySound("ricochet/hit")
		TNT1 AAA 0 A_CustomMissile ("OldschoolRocketSmokeTrail2", 2, 0, random (0, 360), 2, random (0, 360))

		TNT1 A 0 A_Jump(255, "Spawn1", "Spawn2", "Spawn3", "Spawn4")

	Spawn1:
		TNT1 A 0 A_CheckSight("NoFlare")
		IPF2 AABB 1 bright A_SpawnItem ("YellowFlareSmall", 0)
		Stop

	Spawn2:
		TNT1 A 0 A_CheckSight("NoFlare")
		IPF2 CCDD 1 bright A_SpawnItem ("YellowFlareSmall", 0)
		Stop

	Spawn3:
		TNT1 A 0 A_CheckSight("NoFlare")
		IPF2 EEFF 1 bright A_SpawnItem ("YellowFlareSmall", 0)
		Stop

	Spawn4:
		TNT1 A 0 A_CheckSight("NoFlare")
		IPF2 GGHH 1 bright A_SpawnItem ("YellowFlareSmall", 0)
		Stop


	SpawnFloor:
		TNT1 A 0
		TNT1 A 0 Acs_executealways(373, 0, 0, 0, 0)//Check if is under a liquid
		TNT1 A 2
		TNT1 A 0 A_JumpIfInventory("IsOverWater", 1, "SpawnWater")
		TNT1 A 0 A_JumpIfInventory("IsOverSlime", 1, "SpawnSlime")
		TNT1 A 0 A_JumpIfInventory("IsOverBlood", 1, "SpawnBlood")
		TNT1 A 0 A_JumpIfInventory("IsOverSlime2", 1, "SpawnSlime2")

		TNT1 A 0 A_SpawnItem ("YellowFlareSmall", 0)
		TNT1 A 0 A_SpawnItemEx ("DetectFloorBullet",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("DetectCeilBullet",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("UnderwaterHitPuff",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 AAAAAAAAAA 0 A_CustomMissile ("SparkX", 2, 0, random (0, 360), 2, random (30, 160))
		PUFF A 0 A_PlaySound("ricochet/hit")
		TNT1 AAA 0 A_CustomMissile ("OldschoolRocketSmokeTrail2", 2, 0, random (0, 360), 2, random (30, 160))
		TNT1 A 0 A_Jump(255, "Spawn1", "Spawn2", "Spawn3", "Spawn4")
		stop

	SpawnWater:
		TNT1 A 0
		TNT1 AAAAA 0 A_CustomMissile ("WaterParticleXFAster", 8, 0, random (0, 360), 2, random (30, 160))
		TNT1 AAAAA 0 A_CustomMissile ("WaterParticleXSuperFast", 24, 0, random (0, 360), 2, random (30, 160))
		TNT1 A 0 A_SpawnItem("WaterRicochet")
		Stop

	SpawnSlime:
		TNT1 A 0
		TNT1 AAAAA 0 A_CustomMissile ("nukageParticleXFAster", 8, 0, random (0, 360), 2, random (30, 160))
		TNT1 AAAAA 0 A_CustomMissile ("nukageParticleXFAster", 24, 0, random (0, 360), 2, random (30, 160))
		TNT1 A 0 A_SpawnItem("SlimeRicochet")
		Stop

	SpawnBlood:
		TNT1 A 0
		TNT1 AAAAA 0 A_CustomMissile ("BloodParticleXFAster", 8, 0, random (0, 360), 2, random (30, 160))
		TNT1 AAAAA 0 A_CustomMissile ("BloodParticleXFAster", 24, 0, random (0, 360), 2, random (30, 160))
		TNT1 A 0 A_SpawnItem("BloodRicochet")
		Stop

	SpawnSlime2:
		TNT1 A 0
		TNT1 AAAAA 0 A_CustomMissile ("slimeParticleXFAster", 8, 0, random (0, 360), 2, random (30, 160))
		TNT1 AAAAA 0 A_CustomMissile ("slimeParticleXFAster", 24, 0, random (0, 360), 2, random (30, 160))
		TNT1 A 0 A_SpawnItem("Slime2Ricochet")
		Stop

	}
}

ACTOR BigRicoChet
{
	renderstyle Add
	alpha 1.0
	+CLIENTSIDEONLY
	+BLOODLESSIMPACT 
	+FORCEXYBILLBOARD
	+THRUACTORS
	+NOGRAVITY
	Obituary "%o ate bullet shrapnel."
	damagetype "Shrapnel"
	Scale 0.09
	Speed 0
	Radius 4
	Height 8
	states
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckFloor("SpawnFloor")
		TNT1 A 0
		Stop

	SpawnFloor:
		TNT1 A 0
		TNT1 A 0 Acs_executealways(373, 0, 0, 0, 0)//Check if is under a liquid
		TNT1 A 2
		TNT1 A 0 A_JumpIfInventory("IsOverWater", 1, "SpawnWater")
		TNT1 A 0 A_JumpIfInventory("IsOverSlime", 1, "SpawnSlime")
		TNT1 A 0 A_JumpIfInventory("IsOverBlood", 1, "SpawnBlood")
		TNT1 A 0 A_JumpIfInventory("IsOverSlime2", 1, "SpawnSlime2")
		TNT1 A 00
		stop

	SpawnWater:
		TNT1 A 0
		TNT1 A 0 A_CustomMissile ("WaterParticleXSpawner", 0, 0, random (0, 360), 2, random (80, 110))
		TNT1 A 0 A_SpawnItem("GiantWaterRicochet")
		Stop

	SpawnSlime:
		TNT1 A 0
		TNT1 A 0 A_CustomMissile ("NukageParticleXSpawner", 0, 0, random (0, 360), 2, random (80, 110))
		TNT1 A 0 A_SpawnItem("GiantSlimeRicochet")
		Stop

	SpawnBlood:
		TNT1 A 0
		TNT1 A 0 A_CustomMissile ("BloodParticleXSpawner", 0, 0, random (0, 360), 2, random (80, 110))
		TNT1 A 0 A_SpawnItem("GiantBloodRicochet")
		Stop
	SpawnSlime2:
		TNT1 A 0
		TNT1 A 0 A_CustomMissile ("Slime2ParticleXSpawner", 0, 0, random (0, 360), 2, random (80, 110))
		TNT1 A 0 A_SpawnItem("GiantSlime2Ricochet")
		Stop
	}
}

ACTOR WaterRicochet: RicoChet
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.8
	Scale 1.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("WaterBulletImpact", 0)
		SPHW ABCDE 3
		Stop
	}
}

ACTOR GiantWaterRicochet//: RicoChet
{
	+NOBLOCKMAP
	+NOGRAVITY
	+CLIENTSIDEONLY
	+BLOODLESSIMPACT
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.9
	XScale 3.0
	YScale 2.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("WTREXP", 15)
		GSPL ABCDEFGHIJKLMNOPQRS 2
		TNT1 A 0 A_PlaySound("mountain/splash", 15)
		GSPL TUVWXYZ 2
		Stop
	}
}

ACTOR GiantSlimeRicochet//: RicoChet
{
	+NOBLOCKMAP
	+NOGRAVITY
	+CLIENTSIDEONLY
	+BLOODLESSIMPACT
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.9
	XScale 3.0
	YScale 2.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("WTREXP", 15)
		GSPN ABCDEFGHIJKLMNOPQRS 2
		TNT1 A 0 A_PlaySound("mountain/splash", 15)
		GSPN TUVWXYZ 2
		Stop
	}
}

ACTOR GiantBloodRicochet//: RicoChet
{
	+NOBLOCKMAP
	+NOGRAVITY
	+CLIENTSIDEONLY
	+BLOODLESSIMPACT
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.9
	XScale 3.0
	YScale 2.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("WTREXP", 15)
		GSPB ABCDEFGHIJKLMNOPQRS 2
		TNT1 A 0 A_PlaySound("mountain/splash", 15)
		GSPB TUVWXYZ 2
		Stop
	}
}

ACTOR GiantSlime2Ricochet//: RicoChet
{
	+NOBLOCKMAP
	+NOGRAVITY
	+CLIENTSIDEONLY
	+BLOODLESSIMPACT
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.9
	XScale 3.0
	YScale 2.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("WTREXP", 15)
		GSPS ABCDEFGHIJKLMNOPQRS 2
		TNT1 A 0 A_PlaySound("mountain/splash", 15)
		GSPS TUVWXYZ 2
		Stop
	}
}

ACTOR SlimeRicochet: RicoChet
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.8
	Scale 1.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("WaterBulletImpact", 0)
		SPHG ABCDE 3
		Stop
	}
}

ACTOR Slime2Ricochet: RicoChet
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.8
	Scale 1.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("WaterBulletImpact", 0)
		SPHN ABCDE 3
		Stop
	}
}

ACTOR BloodRicochet: RicoChet
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.8
	Scale 1.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("WaterBulletImpact", 0)
		SPHR ABCDE 3
		Stop
	}
}

ACTOR SilentHitPuff: BulletPuff
{
  spawnid 131
  renderstyle Translucent
  alpha 0.5
  +NOBLOCKMAP
  +NOGRAVITY
  states
  {
  Spawn:
    PUFF A 4 bright
    PUFF B 4 
    // Intentional fall-through
  Melee:
    PUFF CD 4
    stop
  }
}

Actor MiniGunBulletPuff: HitPuff
{
DamageType CutLess
}

Actor MachineGunBulletPuff: HitPuff
{
DamageType CutLess
}

Actor ATBulletPuff: HitPuff
{
Scale 0.4
DamageType Blast
States
{
 Spawn:
    TNT1 A 0
    TNT1 A 0 A_PlaySound ("smallexplode")
    TNT1 AAA 0 A_CustomMissile ("PlasmaSmoke", 0, 0, random (0, 360), 2, random (0, 360))
    EXSH A 3 BRIGHT
    stop
}
}

ACTOR WallChunk
{
	Scale 0.16
	+noteleport
	+missile
	+bounceonactors
	BounceType "Doom"
	+forcexybillboard
    +CLIENTSIDEONLY
    Speed 6
    Gravity 0.7
	bouncefactor 0.2
	height 1
	radius 1
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory ("Timer", random(1,4))
	See:
		TNT1 A 0 A_JumpIfInventory("Timer",4,"See4")
		TNT1 A 0 A_JumpIfInventory("Timer",3,"See3")
		TNT1 A 0 A_JumpIfInventory("Timer",2,"See2")
	See1:
		DUST A 1
		loop
	See2:
		DUST B 1
		loop
	See3:
		DUST C 1
		loop
	See4:
		DUST D 1
		loop
	Death:
		TNT1 A 0 A_ChangeFlag ("missile",0)
		TNT1 A 0 A_ChangeFlag ("doombounce",0)
		TNT1 A 0 A_JumpIfInventory("Timer",4,"Death4")
		TNT1 A 0 A_JumpIfInventory("Timer",3,"Death3")
		TNT1 A 0 A_JumpIfInventory("Timer",2,"Death2")
	Death1:
		DUST A 100
		Stop
	Death2:
		DUST B 100
		Stop
	Death3:
		DUST C 100
		Stop
	Death4:
		DUST D 100
		Stop
	}
}
ACTOR TinyWallChunk : WallChunk
{
	Scale 0.12
}
ACTOR BigWallChunk : WallChunk
{
	Scale 0.3
}
ACTOR HugeWallChunk : WallChunk
{
	Scale 0.4
}

ACTOR SSawPuff: BulletPuff
{
  renderstyle Translucent
scale 0.15
alpha 0.7
damagetype saw
  +NOBLOCKMAP
  +NOGRAVITY
  +NOEXTREMEDEATH
  +FORCEXYBILLBOARD
  states
  {
Spawn:
Death:
XDeath:
Melee:
		TNT1 A 0
		TNT1 AB 1 bright
    TNT1 A 0 A_Jump (128,3)
    TNT1 A 0 A_SpawnItem ("Sparks", 0)
	TNT1 A 0 A_SpawnItemEx ("RicoChet",0,0,-5,0,0,0,0,SXF_NOCHECKPOSITION,0)
	TNT1 AAAAAA 0 A_CustomMissile ("SparkX", 2, 0, random (0, 360), 2, random (30, 170))
		BPUF C 1 bright A_PlaySound("weapons/chainsaw/hitwall")
		BPUF D 1 bright
Stop	
  }
}

ACTOR SSawPuff3: SSawPuff
{
	damagetype tear
}

ACTOR SSawPuff4: SSawPuff
{
	damagetype Massacre
}

ACTOR FakeSSawPuff: SSawPuff
{
+THRUGHOST
}

ACTOR KnifePuff: BulletPuff
{
  renderstyle Translucent
scale 0.15
alpha 0.7
damagetype Cutless
  +NOBLOCKMAP
  +NOGRAVITY
  +NOEXTREMEDEATH
  +FORCEXYBILLBOARD
  states
  {
Spawn:
Death:
XDeath:
Melee:
		TNT1 A 0
		TNT1 AB 1 bright
    TNT1 A 0 A_Jump (128,3)
    TNT1 A 0 A_SpawnItem ("Sparks", 0)
	TNT1 A 0 A_SpawnItemEx ("RicoChet",0,0,-5,0,0,0,0,SXF_NOCHECKPOSITION,0)
	TNT1 AAAAAA 0 A_CustomMissile ("SparkX", 2, 0, random (0, 360), 2, random (30, 170))
		BPUF C 1 bright A_PlaySound("weapons/chainsaw/hitwall")
		BPUF D 1 bright
Stop	
  }
}

Actor PuffSmoke
{
+MISSILE
+NOBLOCKMAP
+NOGRAVITY
+DROPOFF
+NOTELEPORT
+FORCEXYBILLBOARD
+NOTDMATCH
+GHOST
+DONTSPLASH
+CLIENTSIDEONLY
radius 1
height 1
mass 1
  renderstyle Translucent
alpha 0.9
Scale 1.5
Speed 1
seesound "weapons/ricochet"
states
	{
	Spawn:
		TNT1 A 0
        PUFY ZZZCCCCCCCCCCDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD 1 A_FadeOut(0.03)
		stop
	}
}

ACTOR Sparks: BulletPuff
{
  renderstyle Translucent
  alpha 0.8
  +NOBLOCKMAP
  +NOGRAVITY
  +CLIENTSIDEONLY
  Scale 0.5
  states
  {
  Spawn:
    TNT1 A 0
    TNT1 A 0 A_SpawnItem ("YellowFlareSmall", 0)
    TNT1 A 0 A_Jump (132, 15)
    FX58 ABCDEFGHIJ 1 bright
    Stop
    TNT1 AAAAA 0
    FX57 ABCDEFGHIJ 1 bright
    stop
  }
}

ACTOR WaterRicochet: RicoChet
{
  renderstyle Translucent
  alpha 0.8
  Scale 1.0
  states
  {
  Spawn:
	SPHW ABCDE 3
	Stop
  }
}

ACTOR GiantWaterRicochet: RicoChet
{
  renderstyle Translucent
  alpha 0.9
  XScale 3.0
  YScale 2.0
  states
  {
  Spawn:
	GSPL ABCDEFGHIJKLMNOPQRSTUVWXYZ 2
	Stop
  }
}

ACTOR SlimeRicochet: RicoChet
{
  renderstyle Translucent
  alpha 0.8
  Scale 1.0
  states
  {
  Spawn:
	SPHG ABCDE 3
	Stop
  }
}