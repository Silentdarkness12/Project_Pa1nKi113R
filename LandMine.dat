Actor LandMineLayer : Weapon
{
Weapon.BobRangeX 0.3
	Weapon.BobRangeY 0.5
	Weapon.BobStyle InverseSmooth
	Weapon.BobSpeed 1.5
Weapon.AmmoType1 "MineAmmo"
Weapon.AmmoType2 "MineAmmo"
Inventory.PickUpSound "misc/i_pkup"
Weapon.AmmoGive 0
Weapon.AmmoUse1 1
Weapon.AmmoUse2 1
+WEAPON.NOALERT
+WEAPON.NOAUTOAIM
Inventory.PickupMessage "Picked up a land mine. Slot (0)"
States
{
Ready:
	MINE A 1 A_WeaponReady
	Loop
Select:
		TNT1 A 0 A_TakeInventory("FistsSelected",1)
		TNT1 A 0 A_TakeInventory("SawSelected",1)
		TNT1 A 0 A_TakeInventory("SledgeSelected",1)
		TNT1 A 0 A_TakeInventory("HandgunSelected",1)
		TNT1 A 0 A_TakeInventory("DualHandgunSelected",1)
		TNT1 A 0 A_TakeInventory("RevolverSelected",1)
		TNT1 A 0 A_TakeInventory("ShotgunSelected",1)
		TNT1 A 0 A_TakeInventory("SSGSelected",1)
		TNT1 A 0 A_TakeInventory("ASGSelected",1)
		TNT1 A 0 A_TakeInventory("QSGSelected",1)
		TNT1 A 0 A_TakeInventory("MinigunSelected",1)
		TNT1 A 0 A_TakeInventory("NewChaingunSelected",1)	
		TNT1 A 0 A_TakeInventory("RocketLauncherSelected",1)
		TNT1 A 0 A_TakeInventory("GrenadeLauncherSelected",1)
		TNT1 A 0 A_TakeInventory("SGLSelected",1)
		TNT1 A 0 A_TakeInventory("PlasmaGunSelected",1)
		TNT1 A 0 A_TakeInventory("M2Selected",1)	
		TNT1 A 0 A_TakeInventory("FreezerSelected",1)
		TNT1 A 0 A_TakeInventory("RailGunSelected",1)
		TNT1 A 0 A_TakeInventory("BFGSelected",1)
		TNT1 A 0 A_TakeInventory("BFGBeamSelected",1)
		TNT1 A 0 A_TakeInventory("BHCSelected",1)
		TNT1 A 0 A_TakeInventory("RevenantLauncherSelected",1)
		TNT1 A 0 A_TakeInventory("FlameCannonSelected",1)
		TNT1 A 0 A_TakeInventory("HellRifleSelected",1)
		TNT1 A 0 A_GiveInventory("LandMineSelected",1)
		TNT1 A 0 A_TakeInventory("UACSMGSelected",1)
		TNT1 A 0 A_TakeInventory("SubMachineGunSelected",1)
		TNT1 A 0 A_TakeInventory("LostSoulSelected",1)
		TNT1 A 0 A_TakeInventory("HasBarrel",1)
		TNT1 A 0 A_TakeInventory("HasBurningBarrel",1)
	MINE A 1 A_Raise
	goto ready
Deselect:
	MINE A 1 A_Lower
	Loop
Fire:
	MIN2 A 5
	MIN2 ABCDEFGH 1
	NULL A 7 A_FireCustomMissile("Mine",0,1,0,0)
	MINE BCDEFG 1
	MINE A 3 A_ReFire
	Goto Ready
AltFire:
	MIN2 A 5
	MIN2 ABCDEFGH 1
	NULL A 5
	MIN3 ABCDE 1
	NULL A 0 A_PlayWeaponSound("MINE002")
	MIN3 FG 1
	MIN3 H 2 A_FireCustomMissile("Mine2",0,1,0,8)
	MIN3 IJKL 1
	NULL A 4
	MINE BCDEFG 1
	MINE A 3 A_ReFire
	Goto Ready
Spawn:
	LMIN A -1
	Stop
}
}
Actor Mine
{
Radius 8
Height 5
Mass 1000000
Health 20
Damage 0
Damagetype landmine
SeeSound "MINE001"
DONTHURTSHOOTER
Speed 2
+NOBLOOD
-SHOOTABLE
+MISSILE
+DOOMBOUNCE
BounceFactor 0.1
+THRUGHOST
States
{
Spawn:
	LMIN A 0 A_Gravity
	LMIN AAABBB 4
	Loop
Death:
	LMIN A 0 A_SpawnItem("MineBase")
	Stop
}
}
Actor MineBase
{
Radius 14
Height 5
Mass 1000000
Health 20
Damage 1
Damagetype landmine
SeeSound "MINE001"
DONTHURTSHOOTER
Speed 0
+NOBLOOD
-SHOOTABLE
+MISSILE
+THRUGHOST
+DEHEXPLOSION
+FORCERADIUSDMG
States
{
Spawn:
	LMIN A 0 A_Gravity
	LMIN AAABBB 4
	Loop
Death:
	TNT1 A 0 A_AlertMonsters
	TNT1 A 0 A_PlaySound("Explosion")
	TNT1 A 0 A_SpawnItemEx ("ExplosionFlareSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("RocketExplosion",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
        TNT1 AAA 0 A_CustomMissile ("ExplosionParticleHeavy", 0, 0, random (0, 360), 2, random (0, 180))
        TNT1 AAAAAAAAAAAAAAAAAA 0 A_CustomMissile ("ExplosionParticleHeavy", 0, 0, random (0, 360), 2, random (0, 360))
		TNT1 AAAAAAAAA 0 A_CustomMissile ("ExplosionParticleVeryFast", 0, 0, random (0, 360), 2, random (0, 360))
        TNT1 AAAAAAA 0 A_CustomMissile ("MediumExplosionFlames", 0, 0, random (0, 360), 2, random (0, 360))
        EXPL AAAAAA 0 A_CustomMissile ("ExplosionSmokeFast22", 0, 0, random (0, 360), 2, random (0, 360))
	MISL B 8 A_Explode
	MISL C 6
	MISL D 4
	Stop
}
}
Actor Mine2 : Mine
{
Damagetype landmine
Speed 15
}
Actor MineAmmo : Ammo
{
Radius 10
Inventory.Amount 1
Inventory.MaxAmount 10
Ammo.BackpackAmount 3
Ammo.BackpackMaxAmount 20
Inventory.PickupMessage "Picked up a land mine."
Inventory.Icon "LMINA0"
States
{
Spawn:
	LMIN A -1
	Loop
}
}